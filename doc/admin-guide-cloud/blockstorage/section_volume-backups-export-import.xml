<?xml version="1.0" encoding="UTF-8"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
    xml:id="volume-backup-restore-export-import">
    <title>Export and import backup metadata</title>
    <para>A volume backup can only be restored on the same Block Storage service. This is because
        restoring a volume from a backup requires metadata available on the database used by the
        Block Storage service.</para>
    <note>
        <para>For information about how to back up and restore a volume, see <xref
                linkend="volume-backup-restore"/>.</para>
    </note>
    <para>You can, however, export the metadata of a volume backup. To do so, run this command as an
        OpenStack <literal>admin</literal> user (presumably, after creating a volume backup):</para>
    <screen><prompt>$</prompt> <userinput>cinder backup-export <replaceable>BACKUP_ID</replaceable></userinput></screen>
    <para>Where <replaceable>BACKUP_ID</replaceable> is the volume backup's ID. This command should
        return the backup's corresponding database information as encoded string metadata.</para>
    <para>Exporting and storing this encoded string metadata allows you to completely restore the
        backup, even in the event of a catastrophic database failure. This will preclude the need to
        back up the entire Block Storage database, particularly if you only need to keep complete
        backups of a small subset of volumes.</para>
    <para>In addition, having a volume backup and its backup metadata also provides volume
        portability. Specifically, backing up a volume and exporting its metadata will allow you to
        restore the volume on a completely different Block Storage database, or even on a different
        cloud service. To do so, first import the backup metadata to the Block Storage database and
        then restore the backup.</para>
    <para>To import backup metadata, run the following command as an OpenStack
            <literal>admin</literal>:</para>
    <screen><prompt>$</prompt> <userinput>cinder backup-import <replaceable>METADATA</replaceable></userinput></screen>
    <para>Where <replaceable>METADATA</replaceable> is the backup metadata exported earlier.</para>
    <para>Once you have imported the backup metadata into a Block Storage database, restore the
        volume (<xref linkend="volume-backup-restore"/>).</para>
</section>
